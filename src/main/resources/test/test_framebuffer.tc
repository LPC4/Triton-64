func div(a, b) {
    var q = 0
    while (a >= b) {
        a = a - b
        q = q + 1
    }
    return q
}

func even(a) {
    while (a >= 2) {
        a = a - 2
    }
    if (a == 0) {
        return 1
    }
    return 0
}

func main() {
    var fb_start = 0x20220000
    var fb_size = 307200
    var bpp = 4
    var width = 320
    var tile_size = 16

    var red = 0xFFFF0000
    var blue = 0xFF0000FF

    var offset = fb_start
    var index = 0

    while (1) {
        offset = fb_start
        index = 0

        while (offset < fb_start + fb_size) {
            var x = index
            var y = 0

            while (x >= width) {
                x = x - width
                y = y + 1
            }

            var tx = 0
            var tmp = x
            while (tmp >= tile_size) {
                tmp = tmp - tile_size
                tx = tx + 1
            }

            var ty = 0
            tmp = y
            while (tmp >= tile_size) {
                tmp = tmp - tile_size
                ty = ty + 1
            }

            var sum = tx + ty
            if (even(sum) == 1) {
                @offset = red
            }
            if (even(sum) == 0) {
                @offset = blue
            }

            index = index + 1
            offset = offset + bpp
        }
    }

    return
}
